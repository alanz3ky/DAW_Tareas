<html>
  <head>
    <meta charset="utf-8" />
    <title>Tarea DWEC04 Alan Matia</title>
    <link rel="stylesheet" href="" />
  </head>
  <body>
    <script>
      function Edificio(calle, numero, codigo) {
        // Propiedades
        this.calle = calle;
        this.numero = numero;
        this.codigo = codigo;
        this.plantas = [];

        // Métodos
        this.agregarPlantasYPuertas = function (numPlantas, numPuertas) {
          for (let i = 0; i < numPlantas; i++) {
            let planta = [];
            for (let j = 0; j < numPuertas; j++) {
              planta.push({ propietario: null });
            }
            this.plantas.push(planta);
          }
        };

        this.modificarNumero = function (numero) {
          this.numero = numero;
        };

        this.modificarCalle = function (calle) {
          this.calle = calle;
        };

        this.modificarCodigoPostal = function (codigo) {
          this.codigo = codigo;
        };

        this.imprimeCalle = function () {
          return this.calle;
        };

        this.imprimeNumero = function () {
          return this.numero;
        };

        this.imprimeCodigoPostal = function () {
          return this.codigo;
        };

        this.agregarPropietario = function (nombre, planta, puerta) {
          this.plantas[planta - 1][puerta - 1].propietario = nombre;
          console.log(
            `${nombre} es ahora el propietario de la puerta ${puerta} de la planta ${planta}.`
          );
        };

        this.imprimePlantas = function () {
          for (let i = 0; i < this.plantas.length; i++) {
            for (let j = 0; j < this.plantas[i].length; j++) {
              let propietario = this.plantas[i][j].propietario;
              if (propietario) {
                console.log(
                  `Propietario del piso ${j + 1} de la planta ${
                    i + 1
                  }: ${propietario}.`
                );
              } else {
                console.log(
                  `Propietario del piso ${j + 1} de la planta ${i + 1}:`
                );
              }
            }
          }
        };

        console.log(
          `Construido nuevo edificio en calle: ${this.calle}, nº: ${this.numero}, CP: ${this.codigo}.`
        );
      }

      var edificioA = new Edificio("Garcia Prieto", "58", "15706");
      var edificioB = new Edificio("Camino Caneiro", "29", "32004");
      var edificioC = new Edificio("San Clemente", "s/n", "15705");

      console.log(
        "El código postal del edificio A es: " + edificioA.imprimeCodigoPostal()
      );
      console.log("La calle del edificio C es: " + edificioC.imprimeCalle());
      console.log(
        "El edificio B está situado en la calle " +
          edificioB.imprimeCalle() +
          " número " +
          edificioB.imprimeNumero()
      );

      edificioA.agregarPlantasYPuertas(2, 3);
      edificioA.agregarPropietario("Jose Antonio Lopez", 1, 1);
      edificioA.agregarPropietario("Luisa Martinez", 1, 2);
      edificioA.agregarPropietario("Marta Castellón", 1, 3);
      edificioA.agregarPropietario("Antonio Pereira", 2, 2);
      edificioA.imprimePlantas();

      edificioA.agregarPlantasYPuertas(1, 3);
      edificioA.agregarPropietario("Pedro Meijide", 3, 2);
      edificioA.imprimePlantas();
    </script>
  </body>
</html>
